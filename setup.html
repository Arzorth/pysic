

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Pysic &mdash; Pysic 0.4.8 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.4.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Pysic 0.4.8 documentation" href="index.html" />
    <link rel="next" title="Running Pysic" href="running.html" />
    <link rel="prev" title="Physics of Pysic" href="physics.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="running.html" title="Running Pysic"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="physics.html" title="Physics of Pysic"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Pysic 0.4.8 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting Pysic</a><ul>
<li><a class="reference internal" href="#contents-of-the-pysic-repository">Contents of the Pysic repository</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compiling-pysic">Compiling Pysic</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#quick-compilation">Quick compilation</a></li>
<li><a class="reference internal" href="#compilation-under-the-hood">Compilation under the hood</a></li>
</ul>
</li>
<li><a class="reference internal" href="#external-resources">External resources</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="physics.html"
                        title="previous chapter">Physics of Pysic</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="running.html"
                        title="next chapter">Running Pysic</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/setup.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="setup"></span><div class="section" id="getting-pysic">
<span id="obtaining"></span><h1>Getting Pysic<a class="headerlink" href="#getting-pysic" title="Permalink to this headline">¶</a></h1>
<p>Pysic is currently in development and not yet properly tested.
Nonetheless, the source code is available through <a class="reference external" href="https://github.com/thynnine/pysic/">github</a> if you wish to
try it out. The code is provided with no warranty or support.</p>
<div class="section" id="contents-of-the-pysic-repository">
<h2>Contents of the Pysic repository<a class="headerlink" href="#contents-of-the-pysic-repository" title="Permalink to this headline">¶</a></h2>
<p>When you download Pysic, you should receive a package containing three directories <em>doc</em>, <em>fortran</em>, and <em>pysic</em>. The directory <em>doc</em> contains the reStructuredText (<tt class="docutils literal"><span class="pre">.rst</span></tt>) source files used for generating the documentation (with <a class="reference external" href="http://sphinx.pocoo.org/">Sphinx</a>). For readability, check the <a class="reference external" href="http://thynnine.github.com/pysic/">online version</a>. The directories <em>fortran</em> and <em>pysic</em> contain the Fortran and Python source code, respectively. In addition to these folders, there should be a <tt class="docutils literal"><span class="pre">readme.txt</span></tt> file containing installation instructions and a <tt class="docutils literal"><span class="pre">Makefile</span></tt> for compiling with <tt class="docutils literal"><span class="pre">make</span></tt>.</p>
</div>
</div>
<div class="section" id="compiling-pysic">
<span id="compiling"></span><h1>Compiling Pysic<a class="headerlink" href="#compiling-pysic" title="Permalink to this headline">¶</a></h1>
<p>This section gives brief instructions on how to compile Pysic.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>To run Pysic, you will need <a class="reference external" href="http://www.python.org">Python 2.x</a> and the <a class="reference external" href="http://numpy.scipy.org/">numpy</a> and <a class="reference external" href="http://www.scipy.org/">scipy</a> modules.
For dynamic simulation, the <a class="reference external" href="https://wiki.fysik.dtu.dk/ase/">ASE</a> package is required. Some plotting tools
also require the <a class="reference external" href="http://matplotlib.sourceforge.net/">matplotlib</a> package, but Pysic will work without it.</p>
<p>To compile the
Fortran core, one needs a Fortran 90 compiler and <a class="reference external" href="http://www.scipy.org/F2py">f2py</a> (the latter is
part of <a class="reference external" href="http://numpy.scipy.org/">numpy</a>.) For compiling an MPI compatible version, an MPI-Fortran
compiler is needed.</p>
</div>
<div class="section" id="quick-compilation">
<h2>Quick compilation<a class="headerlink" href="#quick-compilation" title="Permalink to this headline">¶</a></h2>
<p>To compile Pysic, go to the directory where you have the <tt class="docutils literal"><span class="pre">Makefile</span></tt> and folders <em>fortran</em> and
<em>pysic</em>, and enter the command <tt class="docutils literal"><span class="pre">make</span> <span class="pre">&lt;target&gt;</span></tt> on command line, where <tt class="docutils literal"><span class="pre">&lt;target&gt;</span></tt> is for instance
<tt class="docutils literal"><span class="pre">serial</span></tt> or <tt class="docutils literal"><span class="pre">parallel</span></tt>. A list of available targets are shown with the command <tt class="docutils literal"><span class="pre">make</span> <span class="pre">help</span></tt>.</p>
<p>The default compilers listed in the <tt class="docutils literal"><span class="pre">Makefile</span></tt> are <tt class="docutils literal"><span class="pre">gfortran</span></tt> and <tt class="docutils literal"><span class="pre">mpif90</span></tt>.
You may need to edit the names of the compilers to match those available on your system.</p>
<p>By default, <tt class="docutils literal"><span class="pre">make</span></tt> creates the pysic Python module as a folder named <em>pysic</em> (or <em>pysic_debug</em> etc.,
depending on the type of compilation) in the folder <em>build</em>. To run Pysic, copy the folder <em>pysic</em>
to wherever you wish to run your simulations and import it in Python with <tt class="docutils literal"><span class="pre">import</span> <span class="pre">pysic</span></tt>.</p>
</div>
<div class="section" id="compilation-under-the-hood">
<h2>Compilation under the hood<a class="headerlink" href="#compilation-under-the-hood" title="Permalink to this headline">¶</a></h2>
<p>The Python part of Pysic does not have to be compiled separately, but the Fortran core must be.
In order to link the Fortran and Python sides together, you need to compile the code with the
<a class="reference external" href="http://www.scipy.org/F2py">f2py</a> tool, which is part of the <a class="reference external" href="http://numpy.scipy.org/">numpy</a> package.</p>
<p>The Fortran part is compiled with the commands:</p>
<div class="highlight-python"><pre>f2py -m pysic_fortran -h pysic_fortran.pyf PyInterface.F90
f2py -c --fcompiler=gfortran --f90exec=mpif90 --f90flags="-D MPI" \
pysic_fortran.pyf Mersenne.F90 MPI.F90 Quaternions.F90 Utility.F90 \
Geometry.F90 Potentials.F90 Core.F90 PyInterface.F90</pre>
</div>
<p>The first run creates the interface file <tt class="docutils literal"><span class="pre">pysic_fortran.pyf</span></tt> from the Fortran source file
<tt class="docutils literal"><span class="pre">PyInterface.F90</span></tt>. The second run compiles the rest of the code in a native Fortran mode and
creates the Python accessible binary file <tt class="docutils literal"><span class="pre">pysic_fortran.so</span></tt>. From this file, the subroutines of <tt class="docutils literal"><span class="pre">PyInterface.F90</span></tt> are callable as Python functions.</p>
<p>Above, the <tt class="docutils literal"><span class="pre">gfortran</span></tt> and <tt class="docutils literal"><span class="pre">mpif90</span></tt> compilers are used, but change the names to whichever compilers you wish to call. The flag <tt class="docutils literal"><span class="pre">--f90flags=&quot;-D</span> <span class="pre">MPI&quot;</span></tt>
invokes the preprocessor which picks the MPI part of the source code. To compile a serial version,
leave this flag out.</p>
<p>The created <tt class="docutils literal"><span class="pre">pysic_fortran.so</span></tt> appears in Python as a module <tt class="docutils literal"><span class="pre">pysic_fortran.pysic_interface</span></tt>.
The package structure of pysic expects to find it at <tt class="docutils literal"><span class="pre">pysic.pysic_fortran.pysic_interface</span></tt>, i.e.,
the <tt class="docutils literal"><span class="pre">.so</span></tt> file should be in the folder <em>pysic</em> (the root folder of the Python package).
The <tt class="docutils literal"><span class="pre">Makefile</span></tt> should take care of putting it in the right place, but if you decide to compile the
Fortran part manually, keep in mind that the file needs to be moved there.</p>
<p>For further information on compiling with <a class="reference external" href="http://www.scipy.org/F2py">f2py</a>, consult the <a class="reference external" href="http://cens.ioc.ee/projects/f2py2e/usersguide/">f2py manual</a>.</p>
<blockquote>
<div></div></blockquote>
</div>
</div>
<div class="section" id="external-resources">
<span id="resources"></span><h1>External resources<a class="headerlink" href="#external-resources" title="Permalink to this headline">¶</a></h1>
<p>Below is a list of tools one may find useful or even necessary when using Pysic:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.python.org/">Python</a>: The Python language</li>
<li><a class="reference external" href="http://docs.python.org/">Python documentation</a>: The official documentation for Python</li>
<li><a class="reference external" href="http://docs.python.org/tutorial/index.html">Python tutorial</a>: The official tutorials for Python</li>
<li><a class="reference external" href="http://www.scipy.org/F2py">F2py</a>: Fortran to Python interface generator</li>
<li><a class="reference external" href="http://cens.ioc.ee/projects/f2py2e/usersguide/">F2py manual</a>: The (old) official F2py manual</li>
<li><a class="reference external" href="https://github.com/thynnine/pysic/">github</a>: Version control and repository storing Pysic</li>
<li><a class="reference external" href="https://wiki.fysik.dtu.dk/ase/">ASE</a>: Atomistic Simulation Environment (ASE)</li>
<li><a class="reference external" href="https://wiki.fysik.dtu.dk/ase/tutorials/tutorials.html">ASE tutorials</a>: The official ASE tutorials</li>
<li><a class="reference external" href="http://numpy.scipy.org/">NumPy</a>: Numerical Python</li>
<li><a class="reference external" href="http://www.scipy.org/">SciPy</a>: Scientific Python</li>
<li><a class="reference external" href="http://matplotlib.sourceforge.net/">Matplotlib</a>: Matplotlib Python plotting library</li>
<li><a class="reference external" href="http://ipython.org/">iPython</a>: iPython enhanced Python interpreter</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="running.html" title="Running Pysic"
             >next</a> |</li>
        <li class="right" >
          <a href="physics.html" title="Physics of Pysic"
             >previous</a> |</li>
        <li><a href="index.html">Pysic 0.4.8 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011-2013, Teemu Hynninen.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>